---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: dev-wildcard-cert
  namespace: istio-system
spec:
  # Secret names are automatically prefixed with the Certificate name when certificate is created
  secretName: dev-wildcard-tls
  privateKey:
    rotationPolicy: Never
  issuerRef:
    name: letsencrypt-prod
    kind: ClusterIssuer
  # Bypass Let's Encrypt "exact set" duplicate limit by
  # including both the wildcard and the apex name.
  commonName: "*.dev.butterflycluster.com"
  dnsNames:
  - "*.dev.butterflycluster.com"
  - "dev.butterflycluster.com"
  # Optional: add subject alternative names for specific services if needed
  # - "keycloak.dev.butterflycluster.com"
  # - "kibana.dev.butterflycluster.com"
  # - "grafana.dev.butterflycluster.com"
